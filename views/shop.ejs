<%- include('includes/head.ejs') %>
</head>
<body>
  <%- include('includes/navigation.ejs') %>

  <main class="container mx-auto px-4 py-8">
    <h1 class="text-3xl font-bold text-gray-800 mb-6">List Products</h1>

    <% if (hasProducts) { %>
      <!-- add items-stretch so children (cards) fill the row height -->
      <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 items-stretch">
        <% prods.forEach(function(prod) { %>
          <!-- add h-full so card fills the grid cell and flex layout can push footer to bottom -->
          <div class="bg-white border border-gray-200 rounded-xl shadow hover:shadow-xl transition-shadow duration-300 overflow-hidden flex flex-col h-full">
            <a href="#" class="block overflow-hidden">
              <!-- keep fixed image height so images don't change card height -->
              <img src="<%= prod.imageUrl %>" alt="<%= prod.title %>" 
                   class="w-full h-48 object-cover transform hover:scale-105 transition-transform duration-300">
            </a>

            <!-- content column -->
            <!-- keep flex-col and flex-grow so mt-auto works correctly -->
            <div class="px-4 py-3 flex flex-col flex-grow">
              <h2 class="text-lg font-semibold text-gray-900 mb-2 hover:text-blue-600 transition-colors duration-300">
                <%= prod.title %>
              </h2>

              <!-- make description a fixed height and hide overflow so cards are uniform -->
              <p class="text-gray-700 mb-3 text-sm overflow-hidden" style="max-height:3.5rem;">
                <%= prod.description || 'No description provided.' %>
              </p>

              <p class="text-gray-700 mb-3 flex items-center space-x-2">
                <span class="text-yellow-400">
                  ★★★★★
                </span>
                <span class="text-sm font-medium text-gray-500">5.0</span>
              </p>

              <!-- mt-auto keeps price/button at bottom of card because card is h-full and content area uses flex-grow -->
              <div class="mt-auto flex items-center justify-between">
                <span class="text-xl font-bold text-gray-900"><%= prod.price %></span>
                <a href="#" class="bg-blue-600 text-white font-medium px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors duration-300">
                  Add to Cart
                </a>
              </div>
            </div>
          </div>
        <% }); %>
      </div>
    <% } else { %>
      <h2 class="text-2xl font-semibold text-gray-700 text-center mt-12">No Products Found!</h2>
    <% } %>
  </main>

<%- include('includes/end.ejs') %>
